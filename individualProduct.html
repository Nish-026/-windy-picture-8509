<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="individualProduct.css">
</head>
<body>
    <div id="first_row"></div>
    
</body>
</html>
<script>
    let mainSection=document.getElementById("first_row")
    window.addEventListener("load",()=>{fetchAndRenderProduct()})
    let clicked= localStorage.getItem("clicked");

    function fetchAndRenderProduct(){
       fetch("https://63c79a8a075b3f3a91cf3edd.mockapi.io/products/")
          .then((res)=> res.json())
          .then((data)=>{
           console.log(data);
           PrimersData=data;
           let ClickedProduct=data.filter((item)=>{
            console.log(clicked)
            if(item.id==clicked){
                return item;
            }
           })
           console.log(ClickedProduct)
           renderCardList(ClickedProduct)
    let buttons=document.getElementsByClassName("card_addtocart");
    console.log(buttons);
    for(let button of buttons){
        button.addEventListener("click",(e)=>{
            e.preventDefault()
            var added=button.getAttribute("data-id")
            PrimersData.map((item)=>{
                if(item.id==added){
                    let cartdata= JSON.parse(localStorage.getItem("cart-list"));
                      if(cartdata==null)
                        {
                          cartdata=[];
                        }
                      alert("Product Added To Cart")
                     cartdata.push({...item,quantity:1});
                     localStorage.setItem("cart-list",JSON.stringify(cartdata))
                }
            })
        })
    }




})
}


function renderCardList(cardData){
    let cardList=`
    <div class="card-list">
    ${cardData.map((item) =>
        getCard(
            item.id,
            item.description,
            item.image,
            item.price
         )
        ).join("")}
        </div>
    `
    mainSection.innerHTML=cardList;
}

function getCard(id,title,imageURL,cost){
    let card=`
    <div class="card" data-id=${id}>
           <div class="card-image">
               <img src=${imageURL} alt="food class="product_image" data-id=${id}>
           </div>
           <div class="card-body">
               <h3 class="card-item card-title">${title}</h3>
               <div class="card-item card-additional-info">${cost}</div>
               <button class="card_addtocart" data-id=${id}>Add To Cart</button>
               <select id="Filter">
                    <option value="">Quantity</option>
                    <option value="One">1</option>
                    <option value="Two">2</option>
                    <option value="Three">3</option>
                    <option value="Four">4</option>
                    <option value="Five">5</option>
                  </select>
           </div>
    </div>
    `;
    return card
}



</script>